巻き戻しをする。主に[[裁量トレードモード]]で使用する。
- 任意の時間軸（インデックス）にジャンプして、その時点の状態を表示する
![[Pasted image 20250801155043.png]]

## 🔁 データ管理設計（Reactコンポーネント構成）

```tsx
<ChartPlayback>
  ├── ChartCanvas (描画)
  ├── PlaybackControls (再生・一時停止・速度)
  └── TimelineSlider (巻き戻し・早送り)
</ChartPlayback>

```

**状態管理（useState / useRef）**

```tsx
const [currentIndex, setCurrentIndex] = useState(0);
const [isPlaying, setIsPlaying] = useState(false);
const [speed, setSpeed] = useState(1); // 1x, 2x...
const playTimer = useRef<NodeJS.Timeout | null>(null);
```

## 📦 バックエンド要件（補足）

- [[チャート]]データはサーバーから「指定期間」でフェッチ可能にする（例：`/api/chart?from=2020-01-01&to=2020-06-01`）
    
- クライアント側で全データを保持できない場合、**一定ウィンドウ幅でローディング（lazy loading）**が必要
    
- 複数インジケータやポジション履歴と連動させる場合は、**そのデータも同じ時間基準で統一管理**
    

---

## 💡 補足Tips

- `requestAnimationFrame` を使うとリフレッシュレートに最適化されるからスムーズ
    
- ただし60fpsを超えるようなスピードには `setInterval` で間引く方が安定する
    
- モバイル対応は描画性能とタップ操作の扱いに注意（Canvas重い）