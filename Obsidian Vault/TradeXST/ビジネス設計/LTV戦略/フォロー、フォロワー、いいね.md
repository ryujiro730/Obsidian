[[コミュニティ機能]]でのこれらを用いることで、LTVを伸ばしていく。

# どうやって実装するか？
### 🎯 実装する要素

| 機能      | 説明                    |
| ------- | --------------------- |
| フォロー    | 他のユーザーを「追跡」する関係性      |
| フォロワー一覧 | 自分をフォローしてくれてる人のリスト    |
| いいね     | 投稿（=検証結果・ノートなど）に対する評価 |
| 投稿履歴    | ユーザーが公開した検証ログなど       |
## 🧱 Firestore設計：最小構成でスケールさせやすい形
### 📁 users コレクション（ユーザー情報）

```json
/users/{uid}
{
  name: "Taro",
  bio: "インジの鬼",
  createdAt: ...,
  followersCount: 5,
  followingCount: 8
}
```
### 📁 followers サブコレクション（誰にフォローされてるか）

```json
/users/{uid}/followers/{followerUid}
{
  followedAt: ...
}
```

### 📁 following サブコレクション（誰をフォローしてるか）

```json
/users/{uid}/following/{followedUid}
{
  followedAt: ...
}
```
### 📁 posts コレクション（投稿内容＝検証結果やノート）

```json
/posts/{postId}
{
  userId: uid,
  title: "2025年8月1日の検証ログ",
  content: "...",
  likesCount: 12,
  createdAt: ...
}
```

### 📁 likes サブコレクション（誰がどの投稿にいいねしたか）

```json
/posts/{postId}/likes/{likerUid}
{
  likedAt: ...
}

```

## 🧠 裏でやるべきこと（UXと実装を成立させるための設計）

### ✔️ 1. カウントは毎回クエリせず、カウント用に冗長保存

- `followersCount` や `likesCount` はリアルタイム集計しない  
    → 投稿のレンダリングが軽くなる
    

### ✔️ 2. `isFollowing` / `isLiked` の状態はログイン中のユーザー視点で読み込む
```ts
const isFollowing = await getDoc(doc(db, "users", targetUid, "followers", myUid));

```

### ✔️ 3. 投稿に「ユーザー名・画像」も必要なら、Cloud Functionsで`denormalize`（冗長化）して埋める